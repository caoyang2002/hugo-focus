{{- /* 简洁书籍信息卡片 */ -}}

{{- /*< book
    cover=""
    title_zh="书名"
    title_en="name"
    author="作者"
    translator="译者"
    publisher="出版社"
    year="出版日期"
    description="介绍"
    isbn="isbn"
    rating="评分"
    page="页数"
    colection="丛书系列"
    recommendation="推荐理由"
> */ -}}

<div class="book-card-simple">
  <!-- 封面和基本信息 -->
  <div class="book-header">
    <!-- 封面 -->
    <div class="book-cover">
      <img src="{{ .Get "cover" }}"
           alt="{{ .Get "title_zh" }}封面"
           onerror="this.src='/imgs/books.svg'">
    </div>

    <!-- 标题和基础信息 -->
    <div class="book-basic-info">
      <h3 class="book-title-zh">{{ .Get "title_zh" }}</h3>
      {{- if .Get "title_en" -}}
        <p class="book-title-en">{{ .Get "title_en" }}</p>
      {{- end -}}

      <!-- 豆瓣评分 -->
      {{- if .Get "rating" -}}
        <div class="book-rating">
          <span class="rating-star">
            {{- $rating := float (.Get "rating") -}}
            {{- $fullStars := math.Floor (div $rating 2) -}}
            {{- $halfStar := gt (mod $rating 2) 0.5 -}}

            {{- range seq $fullStars -}}★{{- end -}}
            {{- if $halfStar -}}½{{- end -}}
          </span>
          <span class="rating-score">{{ .Get "rating" }}</span>
          {{- if .Get "page" -}}
            <span class="page-info">{{ .Get "page" }}页</span>
          {{- end -}}
        </div>
      {{- end -}}

      <!-- 作者和译者 -->
      <div class="book-meta-line">
        {{- if .Get "author" -}}
          <span class="meta-label">作者：</span>
          <span class="meta-content">{{ .Get "author" }}</span>
        {{- end -}}
      </div>

      <div class="book-meta-line">
        {{- if .Get "translator" -}}
          <span class="meta-label">译者：</span>
          <span class="meta-content">{{ .Get "translator" }}</span>
        {{- end -}}
      </div>

      <!-- 出版社和出版年份 -->
      <div class="book-meta-line">
        {{- if .Get "publisher" -}}
          <span class="meta-label">出版社：</span>
          <span class="meta-content">{{ .Get "publisher" }}</span>
        {{- end -}}

        {{- if .Get "year" -}}
          <span class="meta-label year-label">出版年份：</span>
          <span class="meta-content">{{ .Get "year" }}</span>
        {{- end -}}
      </div>

      <!-- ISBN和丛书 -->
      <div class="book-meta-line">
        {{- if .Get "isbn" -}}
          <span class="meta-label">ISBN：</span>
          <span class="meta-content">{{ .Get "isbn" }}</span>
        {{- end -}}

        {{- if .Get "colection" -}}
          <span class="meta-label series-label">丛书：</span>
          <span class="meta-content series">{{ .Get "colection" }}</span>
        {{- end -}}
      </div>
    </div>
  </div>

  <!-- 描述和推荐理由 -->
  <div class="book-details">
    {{- if .Get "description" -}}
      <div class="book-section">
        <h4>内容简介</h4>
        <p class="book-description">{{ .Get "description" }}</p>
      </div>
    {{- end -}}

    {{- if .Get "recommendation" -}}
      <div class="book-section">
        <h4>推荐理由</h4>
        <p class="book-recommendation">{{ .Get "recommendation" }}</p>
      </div>
    {{- end -}}
  </div>
</div>

<style>
/* 简洁书籍卡片样式 */
.book-card-simple {
  background: #fff;
  border: 1px solid #e8e8e8;
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1.5rem 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.3s ease;
}

.book-card-simple:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* 头部布局 */
.book-header {
  display: flex;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #f0f0f0;
}

/* 封面样式 */
.book-cover {
  flex-shrink: 0;
  width: 140px;
}

.book-cover img {
  width: 100%;
  height: auto;
  border-radius: 4px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.book-cover img:hover {
  transform: translateY(-2px);
}

/* 基础信息 */
.book-basic-info {
  flex: 1;
  min-width: 0; /* 防止内容溢出 */
}

.book-title-zh {
  margin: 0 0 0.5rem 0;
  font-size: 1.4rem;
  color: #333;
  line-height: 1.3;
}

.book-title-en {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  color: #666;
  font-style: italic;
  line-height: 1.4;
}

/* 评分样式 */
.book-rating {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 0.5rem 0;
}

.rating-star {
  color: #ffac2d;
  font-size: 1rem;
}

.rating-score {
  font-weight: bold;
  color: #333;
  font-size: 1.1rem;
}

.page-info {
  margin-left: auto;
  font-size: 0.9rem;
  color: #888;
  background: #f5f5f5;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
}

/* 元信息行 */
.book-meta-line {
  margin: 0.4rem 0;
  font-size: 0.9rem;
  line-height: 1.5;
}

.meta-label {
  color: #888;
  font-weight: 500;
  min-width: 60px;
  display: inline-block;
}

.meta-content {
  color: #555;
}

.year-label {
  margin-left: 1.5rem;
}

.series-label {
  margin-left: 1.5rem;
}

.series {
  color: #0066cc;
  font-weight: 500;
}

/* 详情部分 */
.book-details {
  padding-top: 0.5rem;
}

.book-section {
  margin: 1.2rem 0;
}

.book-section h4 {
  margin: 0 0 0.5rem 0;
  font-size: 1.1rem;
  color: #444;
  font-weight: 600;
}

.book-description,
.book-recommendation {
  margin: 0;
  line-height: 1.7;
  color: #555;
  text-align: justify;
}

.book-recommendation {
  color: #d46b08;
  background: #fff7e6;
  padding: 0.8rem;
  border-radius: 4px;
  border-left: 3px solid #ffa940;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .book-card-simple {
    padding: 1.2rem;
  }

  .book-header {
    flex-direction: column;
    gap: 1.2rem;
  }

  .book-cover {
    width: 120px;
    margin: 0 auto;
  }

  .book-title-zh {
    font-size: 1.3rem;
  }

  .book-meta-line {
    display: block;
  }

  .year-label,
  .series-label {
    margin-left: 0;
    margin-top: 0.3rem;
    display: block;
  }

  .page-info {
    margin-left: 0.5rem;
  }
}

/* 暗色模式支持 */
@media (prefers-color-scheme: dark) {
  .book-card-simple {
    background: #2a2a2a;
    border-color: #404040;
    color: #e0e0e0;
  }

  .book-title-zh {
    color: #f0f0f0;
  }

  .book-title-en {
    color: #aaa;
  }

  .meta-label {
    color: #aaa;
  }

  .meta-content {
    color: #ccc;
  }

  .book-description {
    color: #ccc;
  }

  .book-recommendation {
    color: #ffc069;
    background: rgba(255, 167, 64, 0.1);
    border-left-color: #ffa940;
  }

  .rating-score {
    color: #f0f0f0;
  }

  .page-info {
    background: #404040;
    color: #aaa;
  }
}
</style>
