<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="{{ .Params.bio }}" />
    <title>{{ .Title }} | {{ .Site.Title }}</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" />

    <!-- 模块化CSS -->
    {{/* 先获取所有资源对象 */}}
    {{ $variables := resources.Get "css/about/varibales.css" }}
    {{ $base := resources.Get "css/about/base.css" }}
    {{ $layer := resources.Get "css/about/layer.css" }}
    {{ $navigation := resources.Get "css/about/navigation.css" }}
    {{ $section := resources.Get "css/about/section.css" }}
    {{ $sectionAbout := resources.Get "css/about/section-about.css" }}
    {{ $sectionWorks := resources.Get "css/about/section-works.css" }}
    {{ $sectionContact := resources.Get "css/about/section-contact.css" }}

    {{/* 合并所有资源 */}}
    {{ $css := slice
    $variables
    $base
    $layer
    $navigation
    $section
    $sectionAbout
    $sectionWorks
    $sectionContact
    | resources.Concat "css/about-bundle.css"
    | minify
    | fingerprint
    }}

    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">


    <!-- 预加载关键资源 -->
    {{ if .Params.avatar }}
    <link rel="preload" href="{{ .Params.avatar | relURL }}" as="image" />
    {{ end }}

</head>

<body>
    <!-- ========================================
         3D背景层 - 统一反向偏移
         ===========================    ============= -->
    <div class="layer-3d layer-deep-bg"></div>

    <div class="layer-3d layer-grid">
        <svg class="grid-svg" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid slice">
            <defs>
                <pattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse">
                    <path d="M 60 0 L 0 0 0 60" fill="none" stroke="currentColor" stroke-width="1" />
                </pattern>
            </defs>
            <rect width="1000" height="1000" fill="url(#grid)" class="grid-pattern" />
        </svg>
    </div>

    <div class="layer-3d layer-line">
        <svg class="line-svg" viewBox="0 0 1000 800" preserveAspectRatio="xMidYMid meet">
            <path d="M0,400 L1000,400" stroke-linecap="round" />
            <path d="M500,0 L500,800" stroke-linecap="round" />
            <path d="M100,200 L900,600" stroke-linecap="round" />
            <path d="M900,200 L100,600" stroke-linecap="round" />
        </svg>
    </div>

    <!-- ========================================
         主内容层 - 300vh实际高度
         ======================================== -->
    <div class="layer-3d layer-content">
        <!-- ====================================
             第一屏：个人介绍
             ==================================== -->
        <section class="section section-about" id="about">
            <!-- 头像 -->
            {{ if .Params.avatar }}
            <div class="avatar" style="margin-top: 1000px;">
                <img src="{{ .Params.avatar | relURL }}" alt="{{ .Title }}的头像" loading="eager" />
            </div>
            {{ end }}

            <!-- 标题和简介 -->
            <h1 class="about-title">{{ .Title }}</h1>
            {{ if .Params.bio }}
            <p class="about-bio">{{ .Params.bio }}</p>
            {{ end }}

            <!-- 技能模块 -->
            {{ if .Params.skills }}
            <div class="skills-container">
                {{ range .Params.skills }}
                <div class="skill-item" data-scroll-animate>
                    <div class="skill-icon">
                        <i class="fa {{ .icon }}"></i>
                    </div>
                    <h3 class="skill-name">{{ .name }}</h3>
                    <p class="skill-desc">{{ .description }}</p>
                    <div class="skill-tags">
                        {{ range .tags }}
                        <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
            {{ end }}

            <!-- 经历模块 -->
            {{ if .Params.experiences }}
            <div class="experiences-container">
                <h2 class="exp-title">经历 / 项目</h2>
                {{ range .Params.experiences }}
                <div class="exp-item" data-scroll-animate>
                    <h3 class="exp-company">
                        {{ .title }}
                        {{ if .company }}| {{ .company }}{{ end }}
                    </h3>
                    <p class="exp-period">{{ .period }}</p>
                    <ul class="exp-details">
                        {{ range .details }}
                        <li>{{ . }}</li>
                        {{ end }}
                    </ul>
                </div>
                {{ end }}
            </div>
            {{ end }}
        </section>

        <!-- ====================================
             第二屏：作品文字触发
             ==================================== -->
        <section class="section section-works-trigger">
            <div class="works-text">作品</div>
        </section>

        <!-- ====================================
             第二屏覆盖层：作品视错觉展示
             ==================================== -->
        <section class="section-works-illusion" id="works">
            <div class="works-container">
                {{ range .Params.projects }}
                <div class="work-item">
                    <div class="work-svg icon-wrapper">
                        {{ .svg | safeHTML }}
                    </div>
                    <h3 class="work-name">{{ .name }}</h3>
                    <p class="work-desc">{{ .desc }}</p>
                    <div class="work-tags">
                        {{ range .tags }}
                        <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </section>

        <!-- ====================================
             第三屏：联系方式
             ==================================== -->
        <section class="section section-contact" id="contact">
            <h2 class="contact-title">联系我</h2>
            <div class="contact-container">
                {{ range .Params.contacts }}
                <a href="{{ .url }}" {{ if strings.HasPrefix .url "http" }}target="_blank" rel="noopener noreferrer" {{
                    end }} class="contact-item">
                    <div class="contact-icon">
                        <i class="fa {{ .icon }}"></i>
                    </div>
                    <span class="contact-value">{{ .value }}</span>
                </a>
                {{ end }}
            </div>
        </section>
    </div>

    <!-- ========================================
         导航层 - Fixed固定悬浮
         ======================================== -->
    <div class="layer-nav">
        <!-- 桌面端侧边导航 -->
        <nav class="nav-desktop" aria-label="主导航">
            <a href="#about" class="nav-item active" data-section="about" aria-label="关于我">
                <i class="fa fa-user" aria-hidden="true"></i>
                <span>关于我</span>
            </a>
            <a href="#works" class="nav-item" data-section="works" aria-label="我的作品">
                <i class="fa fa-picture-o" aria-hidden="true"></i>
                <span>我的作品</span>
            </a>
            <a href="#contact" class="nav-item" data-section="contact" aria-label="联系我">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>联系我</span>
            </a>

            <div class="nav-divider" role="separator"></div>

            <!-- Action按钮 -->
            <a href="#works" class="nav-action" aria-label="浏览作品">
                <i class="fa fa-eye" aria-hidden="true"></i>
                <span>浏览作品</span>
            </a>
            <a href="{{ .Site.BaseURL }}" class="nav-action" aria-label="返回主页">
                <i class="fa fa-home" aria-hidden="true"></i>
                <span>返回主页</span>
            </a>
        </nav>

        <!-- 移动端顶部导航 -->
        <nav class="nav-mobile" aria-label="主导航">
            <a href="#about" class="nav-item active" data-section="about" aria-label="关于我">
                <i class="fa fa-user" aria-hidden="true"></i>
                <span>关于我</span>
            </a>
            <a href="#works" class="nav-item" data-section="works" aria-label="作品">
                <i class="fa fa-picture-o" aria-hidden="true"></i>
                <span>作品</span>
            </a>
            <a href="#contact" class="nav-item" data-section="contact" aria-label="联系">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>联系</span>
            </a>
        </nav>
    </div>

    <!-- 模块化JavaScript -->
    <script type="module" src="{{ `js/about/main.js` | relURL }}"></script>

</body>

</html>